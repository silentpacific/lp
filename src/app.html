<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LivePulse Editor - Intelligent Content Analysis</title>
    <link rel="stylesheet" href="style.css">
    <meta name="description" content="LivePulse Editor - Create and manage dynamic pulse points in your content">
</head>
<body class="app-body">
    <!-- App Header -->
    <header class="app-header">
        <div class="header-content">
            <div class="header-left">
                <h1>ü´Ä LivePulse Editor</h1>
                <span class="version">v3.0</span>
            </div>
            <div class="header-right">
                <div class="header-stats">
                    <span id="active-pulse-count">0</span> active pulses
                    <span id="cluster-count">0</span> clusters
                </div>
                <button id="mobile-menu-toggle" class="mobile-menu-toggle" aria-label="Toggle menu">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main App Layout -->
    <div class="app-layout">
        <!-- Sidebar -->
        <aside class="app-sidebar">
            <!-- Article Management Section -->
            <div class="sidebar-section">
                <h3>üìÑ Article Management</h3>
                <div class="article-controls">
                    <select id="article-select">
                        <option value="">Select an article...</option>
                    </select>
                    <div class="article-actions">
                        <button id="new-article-btn" class="btn btn-small btn-success">New</button>
                        <button id="save-article-btn" class="btn btn-small btn-primary">Save</button>
                        <button id="delete-article-btn" class="btn btn-small btn-danger">Delete</button>
                    </div>
                </div>
                <div id="current-article-info" class="article-info">
                    <span class="text-muted">No article selected</span>
                </div>
            </div>

            <!-- Stats Section -->
            <div class="sidebar-section">
                <h3>üìä Statistics</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number" id="active-pulse-count">0</div>
                        <div class="stat-label">Active Pulses</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="cluster-count">0</div>
                        <div class="stat-label">Clusters</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="success-rate">100%</div>
                        <div class="stat-label">Success Rate</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-time" id="next-update-time">--</div>
                        <div class="stat-label">Next Update</div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Stats -->
            <div class="sidebar-section">
                <h3>üìà Breakdown</h3>
                <div class="enhanced-stats">
                    <div class="stat-category">
                        <h4>Categories</h4>
                        <div id="category-breakdown" class="stat-breakdown"></div>
                    </div>
                    <div class="stat-category">
                        <h4>Confidence</h4>
                        <div id="confidence-breakdown" class="stat-breakdown"></div>
                    </div>
                    <div class="stat-category">
                        <h4>Source Quality</h4>
                        <div id="source-breakdown" class="stat-breakdown"></div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="sidebar-section">
                <h3>‚ö° Quick Actions</h3>
                <div class="quick-actions">
                    <button onclick="window.livePulseApp?.updateAllPulses?.()" class="btn btn-small btn-primary">Update All</button>
                    <button onclick="window.livePulseApp?.pauseAllPulses?.()" class="btn btn-small btn-warning">Pause All</button>
                    <button onclick="window.livePulseApp?.clearAllPulses?.()" class="btn btn-small btn-danger">Clear All</button>
                </div>
            </div>

            <!-- Settings -->
            <div class="sidebar-section">
                <h3>‚öôÔ∏è Settings</h3>
                <div class="settings-controls">
                    <label class="toggle-control">
                        <input type="checkbox" id="toggle-footnotes" checked>
                        <span>Show Footnotes</span>
                        <span id="footnotes-status" class="status-indicator">Enabled</span>
                    </label>
                    <label class="toggle-control">
                        <input type="checkbox" id="toggle-superscripts" checked>
                        <span>Show Superscripts</span>
                        <span id="superscripts-status" class="status-indicator">Enabled</span>
                    </label>
                </div>
            </div>

            <!-- Export -->
            <div class="sidebar-section">
                <h3>üì§ Export</h3>
                <div class="export-controls">
                    <button id="export-html" class="btn btn-small btn-info">Export HTML</button>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="app-main">
            <!-- Enhanced Control Panel -->
            <div class="enhanced-control-panel">
                <div class="control-section">
                    <h3>üéõÔ∏è Enhanced Controls</h3>
                    
                    <!-- Filters -->
                    <div class="filter-controls">
                        <select id="category-filter">
                            <option value="all">All Categories</option>
                        </select>
                        <select id="confidence-filter">
                            <option value="all">All Confidence Levels</option>
                            <option value="high">High</option>
                            <option value="medium">Medium</option>
                            <option value="low">Low</option>
                        </select>
                        <select id="source-quality-filter">
                            <option value="all">All Source Qualities</option>
                            <option value="premium">Premium</option>
                            <option value="standard">Standard</option>
                            <option value="basic">Basic</option>
                            <option value="unknown">Unknown</option>
                        </select>
                        <button id="clear-filters-btn" class="btn btn-small btn-secondary">Clear Filters</button>
                    </div>

                    <!-- Search -->
                    <div class="search-controls">
                        <input type="text" id="pulse-search" placeholder="Search pulse points..." class="search-input">
                        <button id="search-clear-btn" class="btn btn-small btn-secondary">Clear</button>
                    </div>

                    <!-- Bulk Operations -->
                    <div class="bulk-controls">
                        <button id="bulk-update-btn" class="btn btn-small btn-primary">Bulk Update</button>
                        <button id="bulk-pause-btn" class="btn btn-small btn-warning">Bulk Pause</button>
                        <button id="bulk-resume-btn" class="btn btn-small btn-success">Bulk Resume</button>
                    </div>

                    <!-- Import/Export -->
                    <div class="import-export-controls">
                        <button id="export-config-btn" class="btn btn-small btn-info">Export Config</button>
                        <button id="import-config-btn" class="btn btn-small btn-info">Import Config</button>
                        <input type="file" id="import-config-input" accept=".json" style="display: none;">
                        <button id="validate-btn" class="btn btn-small btn-secondary">Validate</button>
                    </div>

                    <!-- Filter Status -->
                    <div id="filter-status" class="filter-status">Showing all pulse points</div>
                </div>
            </div>

            <!-- Input Section -->
            <div class="input-section">
                <div class="input-group">
                    <label for="article-content">Article Content</label>
                    <textarea id="article-content" placeholder="Paste your article content here..." rows="8"></textarea>
                </div>

                <div class="action-row">
                    <button id="scan-full-article" class="btn btn-primary">üîç Scan Full Article for Pulse Points</button>
                </div>

                <!-- Full Article Scan Results -->
                <div id="full-scan-results" class="scan-results hidden">
                    <div class="scan-header">
                        <h3>üîç Article Scan Results</h3>
                        <div class="scan-stats">
                            <span id="scan-pulse-count">0 pulse points</span>
                            <span id="scan-cluster-count">0 clusters</span>
                        </div>
                    </div>
                    <div id="scan-results-content" class="scan-content"></div>
                </div>

                <div class="input-group">
                    <label for="selected-text">Selected Text for Analysis</label>
                    <input type="text" id="selected-text" placeholder="Enter text to make dynamic (e.g., 'Bitcoin is at $67,500')">
                </div>

                <div class="analysis-controls">
                    <button id="analyze-btn" class="btn btn-success">üî¨ Analyze for Pulse Points</button>
                    <button id="create-pulse-btn" class="btn btn-primary hidden">‚ú® Create Pulse Point</button>
                </div>

                <!-- Analysis Results -->
                <div id="analysis-result" class="analysis-result hidden">
                    <div id="analysis-content"></div>
                </div>
            </div>

            <!-- Pulse Management -->
            <div class="pulse-section">
                <div class="section-header">
                    <h2>üéØ Pulse Points</h2>
                    <div class="pulse-controls">
                        <div class="view-controls">
                            <button class="btn btn-small" data-view-mode="detailed">Detailed</button>
                            <button class="btn btn-small" data-view-mode="compact">Compact</button>
                        </div>
                        <div class="sort-controls">
                            <button class="btn btn-small" data-sort-by="id">ID <span class="sort-indicator"></span></button>
                            <button class="btn btn-small" data-sort-by="type">Type <span class="sort-indicator"></span></button>
                            <button class="btn btn-small" data-sort-by="confidence">Confidence <span class="sort-indicator"></span></button>
                        </div>
                    </div>
                </div>
                <div id="pulse-list" class="pulse-list"></div>
            </div>
        </main>

        <!-- Preview Panel -->
        <aside class="preview-panel">
            <div class="preview-header">
                <h3>üëÅÔ∏è Live Preview</h3>
                <div class="preview-controls">
                    <button class="btn btn-small btn-secondary">Refresh</button>
                </div>
            </div>
            <div id="article-preview" class="preview-content"></div>
        </aside>
    </div>

    <!-- Mobile Menu -->
    <nav id="mobile-menu" class="mobile-menu">
        <div class="mobile-menu-content">
            <a href="#input" class="mobile-menu-item">üìù Editor</a>
            <a href="#pulses" class="mobile-menu-item">üéØ Pulses</a>
            <a href="#preview" class="mobile-menu-item">üëÅÔ∏è Preview</a>
            <a href="#stats" class="mobile-menu-item">üìä Stats</a>
            <a href="#settings" class="mobile-menu-item">‚öôÔ∏è Settings</a>
        </div>
    </nav>

    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu-overlay"></div>

    <!-- Load the modular JavaScript application -->
    <script type="module" src="../js/core/app.js"></script>
</body>
</html>